<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Құран Кәрім - Қазақша</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cormorant+Garamond:wght@400;500;600;700&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --color-bg-main: #f8f7f4;
            --color-bg-card: #ffffff;
            --color-accent-primary: #c49a3a;
            --color-accent-secondary: #8b6f47;
            --color-text-primary: #2c2416;
            --color-text-secondary: #6b5d4f;
            --color-border: #e4dfd6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Lora', serif;
            background: var(--color-bg-main);
            color: var(--color-text-primary);
            line-height: 1.8;
            overflow-x: hidden;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 30%, rgba(196, 154, 58, 0.04) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(139, 111, 71, 0.04) 0%, transparent 50%);
            z-index: -1;
        }

        .header {
            text-align: center;
            padding: max(env(safe-area-inset-top), 1.5rem) 1rem 1.5rem;
            background: linear-gradient(180deg, rgba(196, 154, 58, 0.12) 0%, transparent 100%);
            border-bottom: 2px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            background-blend-mode: overlay;
        }

        .header h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2rem, 8vw, 3rem);
            font-weight: 700;
            color: var(--color-accent-primary);
            margin-bottom: 0.25rem;
            letter-spacing: 0.02em;
        }

        .header .subtitle {
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            color: var(--color-text-secondary);
            font-weight: 500;
            letter-spacing: 0.05em;
        }

        .controls-wrapper {
            position: sticky;
            top: calc(max(env(safe-area-inset-top), 1.5rem) + 85px);
            z-index: 90;
            background: var(--color-bg-main);
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .controls {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr auto auto;
            gap: 0.5rem;
            align-items: center;
        }

        .custom-select-wrapper {
            position: relative;
            width: 100%;
        }

        .custom-select {
            width: 100%;
            padding: 0.75rem 1rem;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            color: var(--color-text-primary);
            font-family: 'Lora', serif;
            font-size: 0.95rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
            display: flex;
            align-items: center;
            justify-content: space-between;
            user-select: none;
        }

        .custom-select:hover {
            border-color: var(--color-accent-primary);
            background: rgba(196, 154, 58, 0.05);
        }

        .custom-select.active {
            border-color: var(--color-accent-primary);
            box-shadow: 0 0 0 3px rgba(196, 154, 58, 0.15);
        }

        .custom-select-icon {
            color: var(--color-accent-primary);
            transition: transform 0.3s ease;
            font-size: 0.9rem;
        }

        .custom-select.active .custom-select-icon {
            transform: rotate(180deg);
        }

        .custom-options {
            position: absolute;
            top: calc(100% + 0.5rem);
            left: 0;
            right: 0;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-10px);
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .custom-options.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: all;
        }

        .custom-options::-webkit-scrollbar {
            width: 8px;
        }

        .custom-options::-webkit-scrollbar-track {
            background: var(--color-bg-main);
            border-radius: 8px;
        }

        .custom-options::-webkit-scrollbar-thumb {
            background: var(--color-accent-primary);
            border-radius: 8px;
        }

        .custom-option {
            padding: 0.875rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.95rem;
        }

        .custom-option:hover {
            background: rgba(196, 154, 58, 0.1);
        }

        .custom-option.selected {
            background: rgba(196, 154, 58, 0.15);
            color: var(--color-accent-primary);
            font-weight: 600;
        }

        .custom-option-number {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: rgba(196, 154, 58, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--color-accent-primary);
            flex-shrink: 0;
        }

        .custom-option.selected .custom-option-number {
            background: var(--color-accent-primary);
            color: white;
        }

        .search-box {
            padding: 0.75rem 1rem;
            border-bottom: 2px solid var(--color-border);
            position: sticky;
            top: 0;
            background: var(--color-bg-card);
            z-index: 1;
        }

        .search-input {
            width: 100%;
            padding: 0.625rem 1rem;
            padding-left: 2.5rem;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            font-family: 'Lora', serif;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            background: var(--color-bg-main);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--color-accent-primary);
            box-shadow: 0 0 0 3px rgba(196, 154, 58, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-accent-secondary);
            pointer-events: none;
        }

        .nav-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .controls button {
            padding: 0.75rem;
            width: 44px;
            height: 44px;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            color: var(--color-text-primary);
            font-size: 1rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
        }

        .controls button:active {
            transform: scale(0.95);
        }

        .controls button:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .fab-menu {
            position: fixed;
            bottom: max(env(safe-area-inset-bottom), 1rem);
            right: 1rem;
            z-index: 1000;
        }

        .fab-button {
            width: 56px;
            height: 56px;
            background: var(--color-accent-primary);
            color: white;
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 12px rgba(196, 154, 58, 0.4);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }

        .fab-button:active {
            transform: scale(0.9);
        }

        .fab-options {
            position: absolute;
            bottom: 70px;
            right: 0;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 16px;
            padding: 0.5rem;
            min-width: 200px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
            transform: scale(0);
            opacity: 0;
            transition: all 0.3s ease;
            transform-origin: bottom right;
        }

        .fab-options.active {
            transform: scale(1);
            opacity: 1;
        }

        .fab-option {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        .fab-option:hover,
        .fab-option:active {
            background: rgba(196, 154, 58, 0.1);
        }

        .toggle-switch {
            position: relative;
            width: 48px;
            height: 26px;
            background: var(--color-border);
            border-radius: 13px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .toggle-switch.active {
            background: var(--color-accent-primary);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active::after {
            transform: translateX(22px);
        }

        .loading {
            text-align: center;
            padding: 3rem 1rem;
            font-size: 1rem;
            color: var(--color-text-secondary);
        }

        .spinner {
            display: inline-block;
            width: 36px;
            height: 36px;
            border: 3px solid var(--color-border);
            border-top-color: var(--color-accent-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .surah-info {
            max-width: 1200px;
            margin: 1rem auto;
            padding: 1.5rem 1rem;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        }

        .surah-info h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            color: var(--color-accent-primary);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .surah-info .meta {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            letter-spacing: 0.03em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ayah-container {
            max-width: 1200px;
            margin: 0 auto 2rem;
            padding: 0 1rem;
        }

        .ayah-card {
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 16px;
            padding: 1.5rem 1rem;
            margin-bottom: 1rem;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .ayah-card:active {
            transform: scale(0.99);
        }

        .ayah-number {
            position: absolute;
            top: -12px;
            left: 1rem;
            background: var(--color-accent-primary);
            color: #ffffff;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.95rem;
            box-shadow: 0 3px 10px rgba(196, 154, 58, 0.3);
        }

        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: clamp(1.6rem, 5vw, 2rem);
            line-height: 2.2;
            text-align: right;
            direction: rtl;
            color: var(--color-text-primary);
            margin-bottom: 1.5rem;
            padding: 1.25rem;
            background: rgba(196, 154, 58, 0.06);
            border-radius: 12px;
            border-right: 4px solid var(--color-accent-primary);
            font-weight: 400;
        }

        .section-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: 'Cormorant Garamond', serif;
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            color: var(--color-accent-secondary);
            margin-bottom: 0.75rem;
        }

        .section-label i {
            font-size: 1rem;
            color: var(--color-accent-primary);
        }

        .transliteration-text {
            font-size: clamp(0.95rem, 3vw, 1.1rem);
            line-height: 1.9;
            color: var(--color-text-secondary);
            margin-bottom: 1.5rem;
            font-style: italic;
            padding: 1rem;
            background: rgba(139, 111, 71, 0.08);
            border-radius: 8px;
            border-left: 3px solid var(--color-accent-secondary);
        }

        .translation-text {
            font-size: clamp(1rem, 3.5vw, 1.15rem);
            line-height: 2;
            color: var(--color-text-primary);
            padding: 1rem;
            background: linear-gradient(135deg, rgba(196, 154, 58, 0.05) 0%, rgba(139, 111, 71, 0.05) 100%);
            border-radius: 12px;
            border-left: 4px solid var(--color-accent-primary);
        }

        .bismillah {
            text-align: center;
            margin: 1rem auto;
            padding: 1.5rem 1rem;
            max-width: 1200px;
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        }

        .bismillah .arabic-text {
            font-size: clamp(1.8rem, 6vw, 2.5rem);
            border: none;
            background: transparent;
            text-align: center;
            direction: rtl;
            margin-bottom: 1rem;
            padding: 0.5rem;
        }

        .bismillah .translation-text {
            font-size: clamp(0.95rem, 3vw, 1.05rem);
            text-align: center;
            background: rgba(196, 154, 58, 0.08);
            border: 1px solid var(--color-border);
            border-left: 1px solid var(--color-border);
        }

        .continuous-view {
            background: var(--color-bg-card);
            border: 2px solid var(--color-border);
            border-radius: 16px;
            padding: 1.5rem 1rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        }

        .continuous-view .arabic-full {
            font-family: 'Amiri', serif;
            font-size: clamp(1.4rem, 4.5vw, 1.7rem);
            line-height: 2.2;
            text-align: right;
            direction: rtl;
            color: var(--color-text-primary);
            padding: 1.25rem;
            background: rgba(196, 154, 58, 0.06);
            border-radius: 12px;
            border-right: 4px solid var(--color-accent-primary);
            margin-bottom: 2rem;
        }

        .continuous-view .transliteration-full {
            font-size: clamp(0.9rem, 3vw, 1rem);
            line-height: 1.9;
            color: var(--color-text-secondary);
            font-style: italic;
            padding: 1.25rem;
            background: rgba(139, 111, 71, 0.08);
            border-radius: 12px;
            border-left: 3px solid var(--color-accent-secondary);
            margin-bottom: 2rem;
        }

        .continuous-view .translation-full {
            font-size: clamp(0.95rem, 3.5vw, 1.1rem);
            line-height: 2;
            color: var(--color-text-primary);
            padding: 1.25rem;
            background: linear-gradient(135deg, rgba(196, 154, 58, 0.05) 0%, rgba(139, 111, 71, 0.05) 100%);
            border-radius: 12px;
            border-left: 4px solid var(--color-accent-primary);
        }

        .footer {
            text-align: center;
            padding: 2rem 1rem;
            padding-bottom: max(2rem, calc(2rem + env(safe-area-inset-bottom)));
            margin-top: 3rem;
            border-top: 2px solid var(--color-border);
            color: var(--color-text-secondary);
            font-size: 0.85rem;
        }

        .footer i {
            color: var(--color-accent-primary);
            margin: 0 0.25rem;
        }

        .scroll-top {
            position: fixed;
            bottom: calc(max(env(safe-area-inset-bottom), 1rem) + 70px);
            right: 1rem;
            width: 48px;
            height: 48px;
            background: var(--color-bg-card);
            border: 2px solid var(--color-accent-primary);
            color: var(--color-accent-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.3s ease;
            z-index: 999;
        }

        .scroll-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .scroll-top:active {
            transform: scale(0.9);
        }

        @media (min-width: 768px) {
            .controls {
                grid-template-columns: 1fr auto auto auto;
            }

            .fab-menu {
                display: none;
            }

            .controls-wrapper {
                padding: 1rem 2rem;
            }

            .ayah-card,
            .continuous-view {
                padding: 2rem 1.5rem;
            }

            .toggle-view-desktop {
                display: flex;
                align-items: center;
                justify-content: space-between;
                gap: 0.75rem;
                padding: 0.75rem 1.25rem;
                background: var(--color-bg-card);
                border: 2px solid var(--color-border);
                border-radius: 12px;
                cursor: pointer;
                transition: all 0.3s ease;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
                min-width: 200px;
            }

            .toggle-view-desktop label {
                cursor: pointer;
                font-size: 0.95rem;
                user-select: none;
                display: flex;
                align-items: center;
                gap: 0.5rem;
                color: var(--color-text-primary);
            }
        }

        @media (max-width: 767px) {
            .toggle-view-desktop {
                display: none;
            }

            .header {
                padding: max(env(safe-area-inset-top), 1rem) 1rem 1rem;
            }

            .controls-wrapper {
                top: calc(max(env(safe-area-inset-top), 1rem) + 75px);
            }
        }

        @media (min-width: 1024px) {
            .ayah-card:hover {
                border-color: var(--color-accent-secondary);
                box-shadow: 0 8px 24px rgba(196, 154, 58, 0.15);
                transform: translateY(-4px);
            }

            .controls button:hover:not(:disabled) {
                border-color: var(--color-accent-primary);
                background: rgba(196, 154, 58, 0.08);
                transform: translateY(-2px);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            }

            .toggle-view-desktop:hover {
                border-color: var(--color-accent-primary);
                background: rgba(196, 154, 58, 0.08);
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            }
        }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <header class="header">
        <h1>القرآن الكريم</h1>
        <p class="subtitle">ҚҰРАН КӘРІМ</p>
    </header>

    <div class="controls-wrapper">
        <div class="controls">
            <div class="custom-select-wrapper">
                <div class="custom-select" id="customSelect">
                    <span id="selectedText">Сүрені таңдаңыз...</span>
                    <i class="fas fa-chevron-down custom-select-icon"></i>
                </div>
                <div class="custom-options" id="customOptions">
                    <div class="search-box">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" class="search-input" id="searchInput" placeholder="Іздеу...">
                    </div>
                    <div id="optionsList"></div>
                </div>
            </div>
            <div class="nav-buttons">
                <button id="prevBtn" disabled aria-label="Алдыңғы">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <button id="nextBtn" disabled aria-label="Келесі">
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
            <div class="toggle-view-desktop" id="toggleDesktop">
                <label>
                    <i class="fas fa-align-left"></i>
                    Үздіксіз оқу
                </label>
                <div class="toggle-switch" id="toggleSwitchDesktop"></div>
            </div>
        </div>
    </div>

    <div id="content">
        <div class="loading">
            <div class="spinner"></div>
            <p>Жүктелуде...</p>
        </div>
    </div>

    <div class="fab-menu">
        <button class="fab-button" id="fabButton" aria-label="Мәзір">
            <i class="fas fa-ellipsis-v"></i>
        </button>
        <div class="fab-options" id="fabOptions">
            <div class="fab-option" id="toggleMobile">
                <label>Үздіксіз оқу</label>
                <div class="toggle-switch" id="toggleSwitchMobile"></div>
            </div>
        </div>
    </div>

    <button class="scroll-top" id="scrollTop" aria-label="Жоғары">
        <i class="fas fa-arrow-up"></i>
    </button>

    <footer class="footer">
        <p><i class="fas fa-book-open"></i> Аударма: Халифа Алтай <i class="fas fa-circle" style="font-size: 0.3rem; vertical-align: middle;"></i> Дереккөз: quranenc.com & alquran.cloud</p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem;">Қазақша аударма Rowwad Translation Center қадағалауымен дайындалған</p>
    </footer>

    <script>
        const surahNames = {
            1: "Әл-Фатиха", 2: "Әл-Бақара", 3: "Әли Ғимран", 4: "Ән-Ниса", 5: "Әл-Мәида",
            6: "Әл-Әнғам", 7: "Әл-Ағраф", 8: "Әл-Әнфәл", 9: "Әт-Тәуба", 10: "Юнус",
            11: "Һуд", 12: "Юсуф", 13: "Әр-Рағд", 14: "Ибраһим", 15: "Әл-Хижр",
            16: "Ән-Нахл", 17: "Әл-Исра", 18: "Әл-Кәһф", 19: "Мәрйәм", 20: "Та Һа",
            21: "Әл-Әнбия", 22: "Әл-Хаж", 23: "Әл-Муъминун", 24: "Ән-Нур", 25: "Әл-Фурқан",
            26: "Әш-Шуғара", 27: "Ән-Нәмл", 28: "Әл-Қасас", 29: "Әл-Ғанкәбут", 30: "Әр-Рум",
            31: "Луқман", 32: "Әс-Сәжда", 33: "Әл-Ахзаб", 34: "Сәба", 35: "Фатир",
            36: "Йа Син", 37: "Әс-Саффат", 38: "Сад", 39: "Әз-Зумәр", 40: "Ғафир",
            41: "Фуссилат", 42: "Әш-Шура", 43: "Әз-Зұхруф", 44: "Әд-Духан", 45: "Әл-Жасия",
            46: "Әл-Ахқаф", 47: "Мұхаммад", 48: "Әл-Фатх", 49: "Әл-Хұжұрат", 50: "Қаф",
            51: "Әз-Зарият", 52: "Әт-Тұр", 53: "Ән-Нәжм", 54: "Әл-Қамар", 55: "Әр-Рахман",
            56: "Әл-Уақиға", 57: "Әл-Хадид", 58: "Әл-Мұжадала", 59: "Әл-Хашр", 60: "Әл-Мұмтахана",
            61: "Әс-Сафф", 62: "Әл-Жұмуға", 63: "Әл-Мұнафиқун", 64: "Әт-Тағабун", 65: "Әт-Талақ",
            66: "Әт-Тахрим", 67: "Әл-Мұлк", 68: "Әл-Қалам", 69: "Әл-Хаққа", 70: "Әл-Мағариж",
            71: "Нұх", 72: "Әл-Жин", 73: "Әл-Музаммил", 74: "Әл-Муддәссир", 75: "Әл-Қияма",
            76: "Әл-Инсан", 77: "Әл-Мұрсалат", 78: "Ән-Нәба", 79: "Ән-Назиғат", 80: "Ғабаса",
            81: "Әт-Тәкуир", 82: "Әл-Инфитар", 83: "Әл-Мұтаффифин", 84: "Әл-Иншиқақ", 85: "Әл-Бұрұж",
            86: "Әт-Тариқ", 87: "Әл-Ағла", 88: "Әл-Ғашия", 89: "Әл-Фажр", 90: "Әл-Баляд",
            91: "Әш-Шәмс", 92: "Әл-Ләйл", 93: "Әд-Духа", 94: "Әш-Шәрх", 95: "Әт-Тин",
            96: "Әл-Ғаләқ", 97: "Әл-Қадр", 98: "Әл-Баййина", 99: "Әз-Залзаля", 100: "Әл-Ғадият",
            101: "Әл-Қариға", 102: "Әт-Такасур", 103: "Әл-Ғаср", 104: "Әл-Һумаза", 105: "Әл-Фил",
            106: "Құрайш", 107: "Әл-Мағун", 108: "Әл-Кәусәр", 109: "Әл-Кәфирун", 110: "Ән-Наср",
            111: "Әл-Мәсәд", 112: "Әл-Ихлас", 113: "Әл-Фәләқ", 114: "Ән-Нас"
        };

        const ayahCounts = {
            1: 7, 2: 286, 3: 200, 4: 176, 5: 120, 6: 165, 7: 206, 8: 75, 9: 129, 10: 109,
            11: 123, 12: 111, 13: 43, 14: 52, 15: 99, 16: 128, 17: 111, 18: 110, 19: 98, 20: 135,
            21: 112, 22: 78, 23: 118, 24: 64, 25: 77, 26: 227, 27: 93, 28: 88, 29: 69, 30: 60,
            31: 34, 32: 30, 33: 73, 34: 54, 35: 45, 36: 83, 37: 182, 38: 88, 39: 75, 40: 85,
            41: 54, 42: 53, 43: 89, 44: 59, 45: 37, 46: 35, 47: 38, 48: 29, 49: 18, 50: 45,
            51: 60, 52: 49, 53: 62, 54: 55, 55: 78, 56: 96, 57: 29, 58: 22, 59: 24, 60: 13,
            61: 14, 62: 11, 63: 11, 64: 18, 65: 12, 66: 12, 67: 30, 68: 52, 69: 52, 70: 44,
            71: 28, 72: 28, 73: 20, 74: 56, 75: 40, 76: 31, 77: 50, 78: 40, 79: 46, 80: 42,
            81: 29, 82: 19, 83: 36, 84: 25, 85: 22, 86: 17, 87: 19, 88: 26, 89: 30, 90: 20,
            91: 15, 92: 21, 93: 11, 94: 8, 95: 8, 96: 19, 97: 5, 98: 8, 99: 8, 100: 11,
            101: 11, 102: 8, 103: 3, 104: 9, 105: 5, 106: 4, 107: 7, 108: 3, 109: 6, 110: 3,
            111: 5, 112: 4, 113: 5, 114: 6
        };

        let currentSurah = 1;
        let isContinuousMode = false;

        const customSelect = document.getElementById('customSelect');
        const customOptions = document.getElementById('customOptions');
        const selectedText = document.getElementById('selectedText');
        const optionsList = document.getElementById('optionsList');
        const searchInput = document.getElementById('searchInput');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const contentDiv = document.getElementById('content');
        const fabButton = document.getElementById('fabButton');
        const fabOptions = document.getElementById('fabOptions');
        const scrollTop = document.getElementById('scrollTop');
        const toggleSwitchMobile = document.getElementById('toggleSwitchMobile');
        const toggleSwitchDesktop = document.getElementById('toggleSwitchDesktop');
        const toggleMobile = document.getElementById('toggleMobile');
        const toggleDesktop = document.getElementById('toggleDesktop');

        function renderOptions(filterText = '') {
            optionsList.innerHTML = '';
            for (let i = 1; i <= 114; i++) {
                const surahName = surahNames[i];
                const fullText = i + '. ' + surahName;
                
                if (filterText && !fullText.toLowerCase().includes(filterText.toLowerCase())) {
                    continue;
                }

                const option = document.createElement('div');
                option.className = 'custom-option';
                option.dataset.value = i;
                if (i === currentSurah) {
                    option.classList.add('selected');
                }
                
                option.innerHTML = `
                    <div class="custom-option-number">${i}</div>
                    <span>${surahName}</span>
                `;
                
                option.addEventListener('click', function() {
                    currentSurah = i;
                    selectedText.textContent = fullText;
                    customOptions.classList.remove('active');
                    customSelect.classList.remove('active');
                    loadSurah(i);
                    
                    document.querySelectorAll('.custom-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                });
                
                optionsList.appendChild(option);
            }
        }

        customSelect.addEventListener('click', function(e) {
            e.stopPropagation();
            customOptions.classList.toggle('active');
            customSelect.classList.toggle('active');
            if (customOptions.classList.contains('active')) {
                searchInput.focus();
            }
        });

        searchInput.addEventListener('input', function(e) {
            renderOptions(e.target.value);
        });

        searchInput.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        document.addEventListener('click', function(e) {
            if (!customSelect.contains(e.target) && !customOptions.contains(e.target)) {
                customOptions.classList.remove('active');
                customSelect.classList.remove('active');
            }
        });

        fabButton.addEventListener('click', function(e) {
            e.stopPropagation();
            fabOptions.classList.toggle('active');
        });

        document.addEventListener('click', function(e) {
            if (!fabButton.contains(e.target) && !fabOptions.contains(e.target)) {
                fabOptions.classList.remove('active');
            }
        });

        toggleMobile.addEventListener('click', function(e) {
            e.stopPropagation();
            isContinuousMode = !isContinuousMode;
            toggleSwitchMobile.classList.toggle('active');
            toggleSwitchDesktop.classList.toggle('active');
            if (currentSurah) {
                loadSurah(currentSurah);
            }
        });

        toggleDesktop.addEventListener('click', function() {
            isContinuousMode = !isContinuousMode;
            toggleSwitchMobile.classList.toggle('active');
            toggleSwitchDesktop.classList.toggle('active');
            if (currentSurah) {
                loadSurah(currentSurah);
            }
        });

        window.addEventListener('scroll', function() {
            if (window.pageYOffset > 300) {
                scrollTop.classList.add('visible');
            } else {
                scrollTop.classList.remove('visible');
            }
        });

        scrollTop.addEventListener('click', function() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        prevBtn.addEventListener('click', function() {
            if (currentSurah > 1) {
                currentSurah--;
                selectedText.textContent = currentSurah + '. ' + surahNames[currentSurah];
                loadSurah(currentSurah);
                renderOptions();
            }
        });

        nextBtn.addEventListener('click', function() {
            if (currentSurah < 114) {
                currentSurah++;
                selectedText.textContent = currentSurah + '. ' + surahNames[currentSurah];
                loadSurah(currentSurah);
                renderOptions();
            }
        });

        function latinToCyrillic(latin) {
            if (!latin) return '';
            
            let result = latin.toLowerCase();
            
            const multiChar = {
                'aa': 'аа',
                'ee': 'ии',
                'oo': 'уу',
                'uu': 'уу',
                'gh': 'ғ',
                'kh': 'х',
                'sh': 'ш',
                'th': 'с',
                'dh': 'з',
                'zh': 'ж'
            };
            
            for (let lat in multiChar) {
                result = result.replace(new RegExp(lat, 'g'), multiChar[lat]);
            }
            
            const singleChar = {
                'a': 'а',
                'b': 'б',
                'd': 'д',
                'e': 'е',
                'f': 'ф',
                'g': 'г',
                'h': 'һ',
                'i': 'и',
                'j': 'ж',
                'k': 'к',
                'l': 'л',
                'm': 'м',
                'n': 'н',
                'o': 'о',
                'p': 'п',
                'q': 'қ',
                'r': 'р',
                's': 'с',
                't': 'т',
                'u': 'у',
                'v': 'в',
                'w': 'у',
                'y': 'й',
                'z': 'з'
            };
            
            for (let lat in singleChar) {
                result = result.replace(new RegExp(lat, 'g'), singleChar[lat]);
            }
            
            return result;
        }

        async function loadSurah(surahNum) {
            contentDiv.innerHTML = '<div class="loading"><div class="spinner"></div><p>Жүктелуде...</p></div>';
            
            prevBtn.disabled = surahNum === 1;
            nextBtn.disabled = surahNum === 114;

            try {
                const kazakhResp = await fetch('https://quranenc.com/api/v1/translation/sura/kazakh_altai/' + surahNum);
                const arabicResp = await fetch('https://api.alquran.cloud/v1/surah/' + surahNum);
                const transResp = await fetch('https://api.alquran.cloud/v1/surah/' + surahNum + '/en.transliteration');

                const kazakhData = await kazakhResp.json();
                const arabicData = await arabicResp.json();
                const transData = await transResp.json();
                
                if (isContinuousMode) {
                    displaySurahContinuous(surahNum, kazakhData.result, arabicData.data, transData.data);
                } else {
                    displaySurahByAyah(surahNum, kazakhData.result, arabicData.data, transData.data);
                }
            } catch (error) {
                contentDiv.innerHTML = '<div class="loading"><p style="color: #c1392b;"><i class="fas fa-exclamation-triangle"></i> Қате орын алды. Қайталап көріңіз.</p></div>';
                console.error('Error:', error);
            }
        }

        function displaySurahByAyah(surahNum, kazakhAyahs, arabicSurah, transSurah) {
            const surahName = surahNames[surahNum];
            const ayahCount = ayahCounts[surahNum];
            
            let html = '<div class="surah-info">';
            html += '<h2>' + surahName + '</h2>';
            html += '<div class="meta">';
            html += '<span class="meta-item"><i class="fas fa-book-quran"></i> ' + surahNum + '-сүре</span>';
            html += '<span class="meta-item"><i class="fas fa-list-ol"></i> ' + ayahCount + ' аят</span>';
            html += '</div></div>';

            if (surahNum !== 1 && surahNum !== 9) {
                const bismillah = 'بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ';
                html += '<div class="bismillah">';
                html += '<div class="arabic-text">' + bismillah + '</div>';
                html += '<div class="translation-text">Аса қамқор, ерекше мейірімді Алланың атымен бастаймын</div>';
                html += '</div>';
            }

            html += '<div class="ayah-container">';

            for (let i = 0; i < kazakhAyahs.length; i++) {
                const kazakhAyah = kazakhAyahs[i];
                const arabicAyah = arabicSurah.ayahs[i];
                const transAyah = transSurah.ayahs[i];
                const ayahNumber = kazakhAyah.aya;
                const arabicText = arabicAyah.text;
                const transliteration = latinToCyrillic(transAyah.text);
                const kazakhTranslation = kazakhAyah.translation;

                html += '<div class="ayah-card">';
                html += '<div class="ayah-number">' + ayahNumber + '</div>';
                html += '<div class="arabic-text">' + arabicText + '</div>';
                html += '<div class="section-label"><i class="fas fa-volume-up"></i> Транскрипция</div>';
                html += '<div class="transliteration-text">' + transliteration + '</div>';
                html += '<div class="section-label"><i class="fas fa-language"></i> Қазақша мағынасы</div>';
                html += '<div class="translation-text">' + kazakhTranslation + '</div>';
                html += '</div>';
            }

            html += '</div>';
            contentDiv.innerHTML = html;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function displaySurahContinuous(surahNum, kazakhAyahs, arabicSurah, transSurah) {
            const surahName = surahNames[surahNum];
            const ayahCount = ayahCounts[surahNum];
            
            let html = '<div class="surah-info">';
            html += '<h2>' + surahName + '</h2>';
            html += '<div class="meta">';
            html += '<span class="meta-item"><i class="fas fa-book-quran"></i> ' + surahNum + '-сүре</span>';
            html += '<span class="meta-item"><i class="fas fa-list-ol"></i> ' + ayahCount + ' аят</span>';
            html += '</div></div>';

            let fullArabic = '';
            let fullTranslit = '';
            let fullTranslation = '';

            if (surahNum !== 1 && surahNum !== 9) {
                const bismillah = 'بِسْمِ ٱللَّهِ ٱلرَّحْمَٰنِ ٱلرَّحِيمِ';
                html += '<div class="bismillah">';
                html += '<div class="arabic-text">' + bismillah + '</div>';
                html += '<div class="translation-text">Аса қамқор, ерекше мейірімді Алланың атымен бастаймын</div>';
                html += '</div>';
            }

            for (let i = 0; i < kazakhAyahs.length; i++) {
                const kazakhAyah = kazakhAyahs[i];
                const arabicAyah = arabicSurah.ayahs[i];
                const transAyah = transSurah.ayahs[i];
                
                fullArabic += arabicAyah.text + ' ۝<br>';
                fullTranslit += latinToCyrillic(transAyah.text) + ' ۝<br>';
                fullTranslation += kazakhAyah.translation + '<br>';
            }

            html += '<div class="continuous-view">';
            html += '<div class="section-label"><i class="fas fa-book-quran"></i> Арабша мәтін</div>';
            html += '<div class="arabic-full">' + fullArabic + '</div>';
            html += '<div class="section-label"><i class="fas fa-volume-up"></i> Транскрипция</div>';
            html += '<div class="transliteration-full">' + fullTranslit + '</div>';
            html += '<div class="section-label"><i class="fas fa-language"></i> Қазақша мағынасы</div>';
            html += '<div class="translation-full">' + fullTranslation + '</div>';
            html += '</div>';

            contentDiv.innerHTML = html;
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        renderOptions();
        loadSurah(1);
        selectedText.textContent = '1. ' + surahNames[1];
    </script>
</body>
</html>